basePath: /api/v1
definitions:
  controller.LoginRequest:
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: password123
        minLength: 8
        type: string
    required:
    - email
    - password
    type: object
  middelware.TokenValidationRequest:
    properties:
      token:
        type: string
    required:
    - token
    type: object
  models.APIError:
    properties:
      details:
        description: More context about the error
        type: string
      field:
        description: For validation errors (which field failed)
        type: string
      type:
        description: e.g., "ValidationError", "DatabaseError"
        type: string
    type: object
  models.APIResponse:
    properties:
      code:
        description: HTTP status code (200, 400, 500, etc.)
        type: integer
      data:
        description: Any response data (can be map, struct, list, etc.)
      error:
        allOf:
        - $ref: '#/definitions/models.APIError'
        description: Detailed error info (nil if success)
      message:
        description: Human-readable message
        type: string
      status:
        description: '"success" or "error"'
        type: string
    type: object
  models.RegisterUser:
    description: User registration request with account details
    properties:
      company_name:
        example: Acme Corp
        type: string
      email:
        example: user@example.com
        type: string
      first_name:
        example: John
        type: string
      last_name:
        example: Doe
        type: string
      password:
        example: securePassword123
        minLength: 8
        type: string
      phone:
        example: "+1234567890"
        type: string
      username:
        example: john_doe
        type: string
    required:
    - email
    - first_name
    - last_name
    - password
    - username
    type: object
  models.RoleAssignment:
    properties:
      assigned_at:
        type: string
      context:
        additionalProperties:
          type: string
        type: object
      expires_at:
        type: string
      level:
        type: integer
      permissions:
        items:
          type: string
        type: array
      role_id:
        type: string
      role_name:
        type: string
    type: object
  models.User:
    properties:
      account_locked_until:
        type: string
      created_at:
        type: string
      email:
        type: string
      email_verified:
        type: boolean
      failed_login_attempts:
        type: integer
      first_name:
        type: string
      id:
        type: string
      last_login_at:
        type: string
      last_name:
        type: string
      password:
        type: string
      phone:
        type: string
      preferences:
        additionalProperties: true
        type: object
      role:
        allOf:
        - $ref: '#/definitions/models.UserRole'
        description: Keep for backward compatibility
      roles:
        items:
          $ref: '#/definitions/models.RoleAssignment'
        type: array
      status:
        $ref: '#/definitions/models.UserStatus'
      updated_at:
        type: string
      username:
        type: string
    type: object
  models.UserRole:
    enum:
    - user
    - admin
    - moderator
    type: string
    x-enum-varnames:
    - UserRoleUser
    - UserRoleAdmin
    - UserRoleModerator
  models.UserStatus:
    enum:
    - active
    - inactive
    - suspended
    - pending_verification
    type: string
    x-enum-varnames:
    - UserStatusActive
    - UserStatusInactive
    - UserStatusSuspended
    - UserStatusPendingVerification
host: localhost:8081
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: "FieldFuze Backend API with DynamoDB and Telnyx Integration\n\n## \U0001F525
    AUTHENTICATION FLOW:\n### Step 1: Register Customer\n**POST /auth/register** -
    Create customer account (no token generated)\n`{\"email\": \"user@example.com\",
    \"username\": \"john\", \"password\": \"pass123\", \"first_name\": \"John\", \"last_name\":
    \"Doe\"}`\n\n## \U0001F680 QUICK AUTHENTICATION:\n### Using the Authorize Button
    (Recommended)\n1. Click the **\U0001F513 Authorize** button (top right of any
    API section)\n2. In the authorization dialog, use the **Login** form:\n- Enter
    your **Username** (email)\n- Enter your **Password**\n- Click **Login** button\n3.
    Your Bearer token will be **automatically applied** to all API calls!\n4. All
    protected endpoints will now work without manual token entry\n\n### Manual Token
    Entry (Alternative)\nIf you prefer manual setup: Get token from `/auth/login`,
    then paste `Bearer YOUR_TOKEN` in the Authorization field"
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: FieldFuze Backend API
  version: "1.0"
paths:
  /auth/user/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve user details by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User details retrieved successfully
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Invalid user ID
          schema:
            $ref: '#/definitions/models.APIResponse'
        "404":
          description: Not Found - User does not exist
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Failed to retrieve user
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Get user details
      tags:
      - User Management
  /auth/user/list:
    get:
      consumes:
      - application/json
      description: Retrieve a list of all users
      parameters:
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      - description: Number of users per page
        in: query
        name: limit
        type: integer
      - description: Sort order (e.g., 'asc' or 'desc')
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User list retrieved successfully
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Failed to retrieve user list
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Get list of users
      tags:
      - User Management
  /auth/user/login:
    post:
      consumes:
      - application/json
      description: Authenticate user and return JWT token
      parameters:
      - description: Login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/controller.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful, returns JWT token
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Invalid login data
          schema:
            $ref: '#/definitions/models.APIResponse'
        "401":
          description: Unauthorized - Invalid credentials
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Login failed
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: User login
      tags:
      - Authentication
  /auth/user/logout:
    post:
      consumes:
      - application/json
      description: Logout user and revoke current JWT token
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            $ref: '#/definitions/models.APIResponse'
        "401":
          description: Unauthorized - Invalid or missing token
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Logout failed
          schema:
            $ref: '#/definitions/models.APIResponse'
      security:
      - BearerAuth: []
      summary: User logout
      tags:
      - Authentication
  /auth/user/register:
    post:
      consumes:
      - application/json
      description: Create a new user account
      parameters:
      - description: Registration request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.RegisterUser'
      produces:
      - application/json
      responses:
        "201":
          description: User registered successfully
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Invalid registration data
          schema:
            $ref: '#/definitions/models.APIResponse'
        "409":
          description: Conflict - User already exists
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Registration failed
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Register a new user
      tags:
      - Authentication
  /auth/user/token:
    post:
      consumes:
      - application/json
      description: Generate or refresh JWT token (legacy endpoint - use /login instead)
      parameters:
      - description: Token generation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.User'
      produces:
      - application/json
      responses:
        "200":
          description: Token generated successfully
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Invalid token request
          schema:
            $ref: '#/definitions/models.APIResponse'
        "401":
          description: Unauthorized - Invalid credentials
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Token generation failed
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Generate JWT token
      tags:
      - Authentication
  /auth/user/update/{id}:
    patch:
      consumes:
      - application/json
      description: Update user information by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Update user request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/models.User'
      produces:
      - application/json
      responses:
        "200":
          description: User updated successfully
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Invalid user ID or data
          schema:
            $ref: '#/definitions/models.APIResponse'
        "404":
          description: Not Found - User does not exist
          schema:
            $ref: '#/definitions/models.APIResponse'
        "500":
          description: Internal Server Error - Failed to update user
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Update user details
      tags:
      - User Management
  /auth/user/validate:
    post:
      consumes:
      - application/json
      description: Validate a JWT token and return user information with roles
      parameters:
      - description: Token validation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/middelware.TokenValidationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Token is valid
          schema:
            $ref: '#/definitions/models.APIResponse'
        "400":
          description: Bad Request - Missing or invalid token in request body
          schema:
            $ref: '#/definitions/models.APIResponse'
        "401":
          description: Unauthorized - Invalid or expired token
          schema:
            $ref: '#/definitions/models.APIResponse'
      summary: Validate JWT token
      tags:
      - Authentication
securityDefinitions:
  BearerAuth:
    description: JWT Authorization header using the Bearer scheme. Enter 'Bearer'
      [space] and then your token in the text input below.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
